webpackJsonp([1],{"4FbQ":function(e,n,t){"use strict";function i(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,t){function i(o,r){try{var a=n[o](r),s=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}return i("next")})}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function s(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}t.d(n,"a",function(){return O});var l,u,d,c,p,f=t("U7vG"),m=t.n(f),h=t("3zLD"),v=(t.n(h),t("tlQw")),b=t.n(v),g=t("9iRE"),w=(t.n(g),t("RH2O")),k=t("BId1"),y=t.n(k),P=t("E9fI"),z=t.n(P),S=function(){function e(e,n){for(var t=0;n.length>t;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),E=s(["\n  mutation deletePorudzbinu($id: ID!){\n    deletePorudzbina(id: $id){\n      id\n    }\n  }"],["\n  mutation deletePorudzbinu($id: ID!){\n    deletePorudzbina(id: $id){\n      id\n    }\n  }"]),j=s(["\n  mutation deleteStavkePorudzbine($id: ID!){\n    deleteStavkePorudzbine(id: $id){\n      id\n    }\n  }"],["\n  mutation deleteStavkePorudzbine($id: ID!){\n    deleteStavkePorudzbine(id: $id){\n      id\n    }\n  }"]),_=s(["\n  mutation updatePorudzbina($id: ID! $vreme: Int!) {\n    updatePorudzbina(id: $id, vreme: $vreme){\n      id\n    }\n  }"],["\n  mutation updatePorudzbina($id: ID! $vreme: Int!) {\n    updatePorudzbina(id: $id, vreme: $vreme){\n      id\n    }\n  }"]),O=(l=t.i(w.a)(function(e){return{deleted:e.deleted}}),u=t.i(h.graphql)(b()(E),{name:"deletePorudzbinu"}),d=t.i(h.graphql)(b()(j),{name:"deleteStavkePorudzbine"}),c=t.i(h.graphql)(b()(_),{name:"updatePorudzbina"}),l(p=u(p=d(p=c(p=function(e){function n(){var e=this;o(this,n);var t=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.button=function(){return m.a.createElement("button",{onClick:function(){return t.handleClick()}},"Obrisi porudzbinu")},t.nekaFunkcija=function(){var n=i(regeneratorRuntime.mark(function n(i){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.updatePorudzbina({variables:{id:i.id,vreme:t.state.vreme}});case 2:o=e.sent,t.showAlert(),Popup.alert("Vreme je poslato!");case 5:case"end":return e.stop()}},n,e)}));return function(e){return n.apply(this,arguments)}}(),t.alertOptions={offset:14,position:"bottom left",theme:"dark",time:5e3,transition:"scale"},t.showAlert=function(){t.msg.show("Vreme je poslato!",{time:2e3,type:"success"})},t.handleClick=function(){return t.setState({isShowingModal:!0})},t.handleClose=function(){return t.setState({isShowingModal:!1,kolicina:""})},t.izmeniVreme=function(e){t.setState({vreme:parseInt(e.target.value)})},t.brisanjePorudzbina=function(){var n=i(regeneratorRuntime.mark(function n(o){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.props.deletePorudzbinu({variables:{id:o.id}});case 2:r=n.sent,o.stavkePorudzbines.map(function(){var n=i(regeneratorRuntime.mark(function n(i,o){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.deleteStavkePorudzbine({variables:{id:i.id}});case 2:r=e.sent;case 3:case"end":return e.stop()}},n,e)}));return function(e,t){return n.apply(this,arguments)}}()),t.props.dispatch({type:"DELETE_PROIZVOD"});case 5:case"end":return n.stop()}},n,e)}));return function(e){return n.apply(this,arguments)}}(),t.state={isShowingModal:!1,vreme:"",color:{},ignore:!0,title:"",options:{body:"Proverite admin panel!",icon:"http://georgeosddev.github.io/react-web-notification/example/Notifications_button_24.png",lang:"en",dir:"ltr"}},t}return a(n,e),S(n,[{key:"handlePermissionGranted",value:function(){this.setState({ignore:!1})}},{key:"handlePermissionDenied",value:function(){this.setState({ignore:!0})}},{key:"handleNotSupported",value:function(){this.setState({ignore:!0})}},{key:"handleButtonClick",value:function(e){if(!this.state.ignore){var n=Date.now();this.setState({title:e,options:{tag:n,body:"Proverite admin panel!",icon:"http://georgeosddev.github.io/react-web-notification/example/Notifications_button_24.png",lang:"en",dir:"ltr"}})}}},{key:"componentDidMount",value:function(){this.setState({title:"Stigla je nova porudzbina!"})}},{key:"componentDidUpdate",value:function(e){null==e.porudzbina.potvrdjen&&"da"==this.props.porudzbina.potvrdjen&&this.handleButtonClick("Porudzbina je potvrdjena!")}},{key:"render",value:function(){var e=this,n=(Date.parse(this.props.porudzbina.createdAt),{});return"da"==this.props.porudzbina.potvrdjen?n={backgroundColor:"green"}:"ne"==this.props.porudzbina.potvrdjen&&(n={backgroundColor:"red"}),m.a.createElement("div",{className:y.a.proizvodItem,style:n},m.a.createElement("div",null,m.a.createElement("h4",null,"Ime i prezime: ",this.props.porudzbina.imeIPrezime),m.a.createElement("h4",null,"Adresa: ",this.props.porudzbina.adresa),m.a.createElement("h4",null,"Broj stana: ",this.props.porudzbina.brojStana),m.a.createElement("h4",null,"Broj Telefona: ",this.props.porudzbina.brojTelefona),""!=this.props.porudzbina.uredjaj?m.a.createElement("h4",null,"Poslato sa telefona"):"",this.props.porudzbina.stavkePorudzbines&&this.props.porudzbina.stavkePorudzbines.map(function(e,n){return m.a.createElement("div",{style:{margin:"3px",padding:"5px",backgroundColor:"rgba(255,255,255,0.3)",border:"1px solid #fff"}},m.a.createElement("h4",null,"Proizvod: ",e.proizvod.naslov),m.a.createElement("h4",null,"Kolicina: ",e.kolicina),e.proizvod.priloziIdu?m.a.createElement("h5",null,"Prilozi: ",e.prilozi):null,e.proizvod.lepinjaIde?m.a.createElement("h5",null,"U somunu: ",e.uSomunu?"Da":"Ne"):null)}),m.a.createElement("h4",{style:{marginBottom:"0px"}},"Vreme pripremanja porudzbine (minuti):"),m.a.createElement("input",{type:"number",onChange:this.izmeniVreme,placeholder:this.props.porudzbina.vreme}),m.a.createElement("button",{style:N.buttonStyle,onClick:function(){e.nekaFunkcija(e.props.porudzbina)}},"Pošalji"),m.a.createElement("h4",null,"Potvrdjeno: ",this.props.porudzbina.potvrdjen),m.a.createElement("h3",null,"Opis: ",this.props.porudzbina.opis),this.button(),this.state.isShowingModal&&m.a.createElement(g.ModalContainer,{onClose:this.handleClose},m.a.createElement(g.ModalDialog,{onClose:this.handleClose},m.a.createElement("h2",null,"Da li zelite obrisati ovu porudzbinu?"),m.a.createElement("button",{style:N.buttonStyle,onClick:function(){return e.handleClose()}},"Otkaži"),m.a.createElement("button",{style:N.buttonStyle,onClick:function(){e.brisanjePorudzbina(e.props.porudzbina),e.handleClose()}},"Potvrdi")))),m.a.createElement(z.a,{ignore:this.state.ignore&&""!==this.state.title,notSupported:this.handleNotSupported.bind(this),onPermissionGranted:this.handlePermissionGranted.bind(this),onPermissionDenied:this.handlePermissionDenied.bind(this),timeout:18e5,title:this.state.title,options:this.state.options}))}}]),n}(m.a.Component))||p)||p)||p)||p),N={buttonStyle:{fontSize:"19px",height:"40px",width:"100px",color:"white",fontWeight:"900",backgroundColor:"rgba(0,0,0,0.2)",margin:"20px 20px",border:"2px solid white",borderRadius:"5px",cursor:"pointer"}}},"9NMP":function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AllPorudzbinas"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"allPorudzbinas"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"adresa"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"vreme"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"brojStana"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"imeIPrezime"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"opis"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"brojTelefona"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"createdAt"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"potvrdjen"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"uredjaj"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"stavkePorudzbines"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"id"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"kolicina"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"prilozi"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"uSomunu"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"proizvod"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"naslov"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"tip"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"lepinjaIde"},arguments:[],directives:[],selectionSet:null},{kind:"Field",alias:null,name:{kind:"Name",value:"priloziIdu"},arguments:[],directives:[],selectionSet:null}]}}]}}]}}]}}],loc:{start:0,end:362}};t.loc.source={body:"query AllPorudzbinas {\n  allPorudzbinas {\n    id,\n    adresa,\n    vreme,\n    brojStana,\n    imeIPrezime,\n    opis,\n    brojTelefona,\n    createdAt,\n    potvrdjen,\n    uredjaj,\n    stavkePorudzbines{\n      id,\n      kolicina,\n      prilozi,\n      uSomunu,\n      proizvod {\n        naslov,\n        tip,\n        lepinjaIde,\n        priloziIdu\n\n      }\n\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=t},BId1:function(e,n){e.exports={proizvodItem:"proizvodItem-cEWGAfW0RjBtn6FS2p2Nq"}},E9fI:function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function r(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;n.length>t;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),s=t("U7vG"),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=t("KSGD"),d="granted",c=function(){var e=0;return function(){return e++}}(),p=function(e){function n(e){i(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),r=!1,a=!1;return"Notification"in window&&window.Notification&&(r=!0,window.Notification.permission===d&&(a=!0)),t.state={supported:r,granted:a},t.notifications={},t.windowFocus=!0,t.onWindowFocus=t._onWindowFocus.bind(t),t.onWindowBlur=t._onWindowBlur.bind(t),t}return r(n,e),a(n,[{key:"_onWindowFocus",value:function(){this.windowFocus=!0}},{key:"_onWindowBlur",value:function(){this.windowFocus=!1}},{key:"_askPermission",value:function(){var e=this;window.Notification.requestPermission(function(n){var t=n===d;e.setState({granted:t},function(){t?e.props.onPermissionGranted():e.props.onPermissionDenied()})})}},{key:"componentDidMount",value:function(){this.props.disableActiveWindow&&(window.addEventListener?(window.addEventListener("focus",this.onWindowFocus),window.addEventListener("blur",this.onWindowBlur)):window.attachEvent&&(window.attachEvent("focus",this.onWindowFocus),window.attachEvent("blur",this.onWindowBlur))),this.state.supported?this.state.granted?this.props.onPermissionGranted():"denied"===window.Notification.permission?this.props.askAgain?this._askPermission():this.props.onPermissionDenied():this._askPermission():this.props.notSupported()}},{key:"componentWillUnmount",value:function(){this.props.disableActiveWindow&&(window.removeEventListner?(window.removeEventListener("focus",this.onWindowFocus),window.removeEventListener("blur",this.onWindowBlur)):window.detachEvent&&(window.detachEvent("focus",this.onWindowFocus),window.detachEvent("blur",this.onWindowBlur)))}},{key:"render",value:function(){var e=this,n=this.props.disableActiveWindow&&this.windowFocus;if(!this.props.ignore&&this.props.title&&this.state.supported&&this.state.granted&&!n){var t=this.props.options;if("string"!=typeof t.tag&&(t.tag="web-notification-"+c()),!this.notifications[t.tag]){var i=new window.Notification(this.props.title,t);i.onshow=function(n){e.props.onShow(n,t.tag),setTimeout(function(){e.close(i)},e.props.timeout)},i.onclick=function(n){e.props.onClick(n,t.tag)},i.onclose=function(n){e.props.onClose(n,t.tag)},i.onerror=function(n){e.props.onError(n,t.tag)},this.notifications[t.tag]=i}}return l.default.createElement("input",{type:"hidden",name:"dummy-for-react-web-notification",style:{display:"none"}})}},{key:"close",value:function(e){e&&"function"==typeof e.close&&e.close()}},{key:"_getNotificationInstance",value:function(e){return this.notifications[e]}}]),n}(l.default.Component);p.propTypes={ignore:u.bool,disableActiveWindow:u.bool,askAgain:u.bool,notSupported:u.func,onPermissionGranted:u.func,onPermissionDenied:u.func,onShow:u.func,onClick:u.func,onClose:u.func,onError:u.func,timeout:u.number,title:u.string.isRequired,options:u.object},p.defaultProps={ignore:!1,disableActiveWindow:!1,askAgain:!1,notSupported:function(){},onPermissionGranted:function(){},onPermissionDenied:function(){},onShow:function(){},onClick:function(){},onClose:function(){},onError:function(){},timeout:5e3,options:{}},n.default=p},"R+MJ":function(e,n,t){"use strict";function i(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);e.length>n;n++)t[n]=e[n];return t}return Array.from(e)}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}t.d(n,"a",function(){return _});var s,l,u,d=t("U7vG"),c=t.n(d),p=t("l2Xg"),f=t("BId1"),m=t.n(f),h=t("KSGD"),v=t.n(h),b=t("3zLD"),g=(t.n(b),t("9NMP")),w=t.n(g),k=t("tlQw"),y=(t.n(k),t("9iRE")),P=(t.n(y),t("4FbQ")),z=t("RH2O"),S=t("E9fI"),E=t.n(S),j=function(){function e(e,n){for(var t=0;n.length>t;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),_=(s=t.i(z.a)(function(e){return{deleted:e.deleted}}),l=t.i(b.graphql)(w.a),s(u=l(u=function(e){function n(){o(this,n);var e=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.state={fakestejt:"fejkstejt",isShowingModal:!1,reload:[],ignore:!0,title:""},e}return a(n,e),j(n,[{key:"componentDidMount",value:function(){var e=this;setInterval(function(){e.props.data.refetch()},1e4)}},{key:"componentWillReceiveProps",value:function(e){e.deleted&&(this.props.dispatch({type:"DELETION_ACK"}),this.props.data.refetch())}},{key:"handlePermissionGranted",value:function(){this.setState({ignore:!1})}},{key:"handlePermissionDenied",value:function(){this.setState({ignore:!0})}},{key:"handleNotSupported",value:function(){this.setState({ignore:!0})}},{key:"handleButtonClick",value:function(e){if(!this.state.ignore){var n=Date.now();this.setState({title:e,options:{tag:n,body:"Proverite admin panel!",icon:"http://georgeosddev.github.io/react-web-notification/example/Notifications_button_24.png",lang:"en",dir:"ltr"}})}}},{key:"render",value:function(){var e=this.props.data,n={};return e.allPorudzbinas&&(n.lista=[].concat(i(e.allPorudzbinas)),n.revers=n.lista.reverse()),c.a.createElement(p.c,{xs:12,sm:12,md:8,lg:8},c.a.createElement("div",{className:m.a.porudzbine},n.revers&&n.revers.map(function(e,n){return c.a.createElement(P.a,{porudzbina:e})})),c.a.createElement(E.a,{ignore:this.state.ignore&&""!==this.state.title,notSupported:this.handleNotSupported.bind(this),onPermissionGranted:this.handlePermissionGranted.bind(this),onPermissionDenied:this.handlePermissionDenied.bind(this),timeout:5e3,title:this.state.title,options:this.state.options}))}}]),n}(c.a.Component))||u)||u);_.propTypes={data:v.a.shape({allPorudzbinas:v.a.arrayOf(v.a.shape({adresa:v.a.string.isRequired,brojTelefona:v.a.number.isRequired}))})}},WTfM:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("U7vG"),o=t.n(i),r=t("l2Xg"),a=t("bCUl"),s=t("R+MJ");n.default=function(){return o.a.createElement(r.a,null,o.a.createElement(r.b,null,o.a.createElement(s.a,null),o.a.createElement(a.a,null)))}},bCUl:function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function r(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}t.d(n,"a",function(){return w});var a,s,l=t("U7vG"),u=t.n(l),d=t("l2Xg"),c=t("KSGD"),p=t.n(c),f=t("3zLD"),m=(t.n(f),t("sRMI")),h=t.n(m),v=t("UrHU"),b=t.n(v),g=function(){function e(e,n){for(var t=0;n.length>t;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),w=(a=t.i(f.graphql)(h.a))(s=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return r(n,e),g(n,[{key:"render",value:function(){var e=this.props.data;return u.a.createElement(d.c,{xs:12,sm:12,md:4,lg:4},u.a.createElement("h3",null,"Lista Proizvoda"),u.a.createElement("div",{className:b.a.proizvodList},e.allProizvods&&e.allProizvods.map(function(e,n){return u.a.createElement("div",{className:b.a.proizvodItem},u.a.createElement("img",{src:e.urlSlike}),u.a.createElement("h4",null,e.naslov),u.a.createElement("h4",null,e.cena," RSD"))})))}}]),n}(u.a.Component))||s;w.propTypes={data:p.a.shape({allProizvods:p.a.arrayOf(p.a.shape({naslov:p.a.string.isRequired,cena:p.a.number.isRequired}))})}}});